            <?php
                $aMessages = $oUpgrader->getMessages();
                $errorOpen = false;
                if (count($aMessages)>0)
                {
                    if ($displayError != true) {
            ?>
                <table border='0' width='100%' cellpadding='0' cellspacing='0' class='sysinfotable' style='margin-top: 0; margin-left:auto; margin-right: auto;'>
                    <tr>
                        <td style='text-align: center;'>
            <?php
                    }
                    foreach ($aMessages AS $k => $msg)
                    {
                        $c = '#! ';
                        if (substr($msg,0,3)==$c)
                        {
                            $msg = str_replace($c, '', $msg);
                            if ($errorOpen == false) {
                                echo '<div class="sysmessage sysinfoerror">';
                                $errorOpen = true;
                            }
                            echo $msg;

                        }
                        else
                        {   
                            if ($displayError != true) {
                                if ($errorOpen == true) {
                                    echo '</div><br />';
                                    $errorOpen = false;
                                }
                                echo '<span class="sysmessage">'.$msg.'</span><br />';
                            }
                        }
                    }                    
                    if ($errorOpen == true) {
                        echo '</div><br />';
                        $errorOpen = false;
                    }
                    if ($displayError != true) {
                ?>                
                        </td>
                    </tr>
                </table>
                <?php
                    }
                }
            ?>
